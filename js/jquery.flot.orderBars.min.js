/*
 Released under the MIT license by Benjamin BUFFET, 20-Sep-2010.
 Modifications made by Steven Hall <github.com/emmerich>, 01-May-2013.
 Modifications made by Jean-François Beauchamp <github.com/velum>, 19-Feb-2016.

 This plugin is an alpha version.

 To activate the plugin you must specify the parameter "order" for the specific serie :

  $.plot($("#placeholder"), [{ data: [ ... ], bars :{ order = null or integer }])

 If 2 series have the same order param, they are ordered by the position in the array;

 The plugin adjust the point by adding a value depanding of the barwidth
 Exemple for 3 series (barwidth : 0.1) :

          first bar delta : -0.15
          second bar delta : -0.05
          third bar delta : 0.05

 The above denote the spacing applied to each bar.
*/
(function(m){m.plot.plugins.push({init:function(m){function q(a,c){for(var d=[],b=0;b<a.length;b++)if(Array.isArray(a[b].data)&&0<a[b].data.length){var f="number"==typeof a[b].data[0][c]?a[b].data[0][c]:0,g="number"==typeof a[b].data[a[b].data.length-1][c]?a[b].data[a[b].data.length-1][c]:a[b].data.length-1;d[0]=0<d.length&&d[0]<=f?d[0]:f;d[1]=1<d.length&&d[1]>=g?d[0]:g}return d}function v(a,c){var d=a.bars.order,b=c.bars.order;return d<b?-1:d>b?1:0}function r(a,c,d){for(var b=0;c<=d;c++)b+=a[c].bars.barWidth+
2*n;return b}var h,k,t,n,u=1,l=!1,p={};m.hooks.processDatapoints.push(function(a,c,d){var b=null;if(null!=c.bars&&c.bars.show&&null!=c.bars.order){c.bars.horizontal&&(l=!0);var f=l?a.getPlaceholder().innerHeight():a.getPlaceholder().innerWidth(),g=l?q(a.getData(),1):q(a.getData(),0);u=(2==g.length?g[1]-g[0]:0)/f;a=a.getData();for(var f=[],g=[],e=0;e<a.length;e++)null!=a[e].bars.order&&a[e].bars.show&&0>g.indexOf(a[e].bars.order)&&(g.push(a[e].bars.order),f.push(a[e]));h=f.sort(v);k=h.length;t="undefined"!==
typeof c.bars.lineWidth?c.bars.lineWidth:2;n=t*u;if(2<=k){for(a=b=0;a<h.length;++a)if(c==h[a]){b=a;break}b+=1;a=a=0;0!=k%2&&(a=h[Math.ceil(k/2)].bars.barWidth/2);"undefined"===typeof p[c.bars.order]&&(p[c.bars.order]=b<=Math.ceil(k/2)?-1*r(h,b-1,Math.floor(k/2)-1)-a:r(h,Math.ceil(k/2),b-2)+a+2*n);b=a=p[c.bars.order];a=d.pointsize;f=d.points;g=0;for(e=l?1:0;e<f.length;e+=a)f[e]+=b,c.data[g][3]=f[e],g++;b=f;d.points=b}}return b})},options:{series:{bars:{order:null}}},name:"orderBars",version:"0.3"})})(jQuery);